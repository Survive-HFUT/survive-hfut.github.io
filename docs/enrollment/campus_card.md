# 校园卡

:::tip

此页的主要内容为**由学校官方发放的、合肥宣城两校区通用的、可用于食堂超市支付和开宿舍门禁等的实体卡片**<mark>（又称饭卡、学生卡、一卡通）</mark>。如果你想要找的是可插入手机作为电话卡使用的<mark>「校园卡」</mark>，请参考[此页](./calling_card.md)

:::

校园一卡通平台是我校智慧校园的重要组成部分，是校园金融支付和身份识别的基础平台，系统功能已涵盖了与师生工作学习生活相关的各项服务，实现了食堂餐饮、商家超市、~~热水淋浴~~^已转为呱呱物联微信小程序^、~~水费~~^已转为趣智校园微信小程序^、电费、图书借阅等各种服务系统的消费支付功能，以及教学楼、图书馆、学生宿舍、办公楼等门禁系统身份识别功能。持卡人具有的各类权限功能由校内各相关单位按学校管理规定确定并赋予，基本实现“一卡在手，走遍校园”[^1]

## 发展历程

::: timeline 2003
合肥工业大学开始“校园一卡通”项目建设[^1]
:::

::: timeline 2014
校园一卡通平台进行一期升级，向全校进行拓展[^1]
:::

::: timeline 2020
系统延伸至宣城校区，宣城校区校园卡系统以合肥本部校园卡系统为主，与本部对接、合并、互通[^2]，即<mark>两个校区的校园卡可互通使用</mark>，至此实现全校区覆盖，信息互联互通[^1]
:::

## 用途

- 校内付款（食堂、便利店、校医院等）
- [图书馆](../campus/xc/library)进出、借书和还书
- 进出宿舍、校门
- 每学期初刷卡注册
- 与虚拟卡绑定后刷卡洗澡或取水

:::tip

校园卡在一段时间内消费达到一定数额（约 30 元）后会要求输入密码[^4]，默认为身份证号后六位（有 X 的往前顺移一位）

:::

## 充值

### 支付宝充值

:::tip

- 充值<mark>并非实时到账</mark>，一般需要等待 1~5 分钟。饭点期间因访问量大可能无法充值或需要等待更久才会到账，因此别忘了提前充值
- 长时间未到账可联系相关工作人员

:::

1. 支付宝搜索<mark>校园派</mark>小程序
2. 首次充值时需选择合肥工业大学并填写学号

充值后显示“待圈存”，在消费机上贴卡后自动写卡入账[^2]

![校园卡的充值](./media/campus_card_recharge.png)

### 圈存机上充值

需要与入学时学校发放的中国农业银行卡绑定才可充值^[宣区:需要验证]^。圈存机充值功能仅限学生使用[^4]

### 现金充值

在屯溪路校区馨园食堂可现金充值[^4]

## 挂失

使用[慧新易校 APP](../life/app#慧新易校)进行挂失与解挂、查询流水、修改密码等操作[^3]

## 补办

:::tabs key:campus
== 宣城校区

- 若忘记慧新易校密码，持证件和校园卡到[一站式业务服务学生社区](../campus/xc/library#一站式服务中心-勤工助学中心-104-办公室)办理[^3]
- 持证件前往位于图书馆 104 的[一站式业务服务学生社区](../campus/xc/library#一站式服务中心-勤工助学中心-104-办公室)自助或人工补办校园卡[^3]
  - 自助补卡机上补办的校园卡需至“信息服务”窗口人工柜台激活公寓门卡
  - 补办校园卡免收制卡成本费用

== 翡翠湖校区

携带身份证原件到翡翠湖校区综合服务楼负一楼网络中心办理，其中教师卡和临时卡外不能使用自助补卡机[^4]

== 屯溪路校区

携带身份证原件到屯溪路校区电教楼一楼用户服务大厅办理[^4]

:::

## 技术细节

通过读卡工具检测可见，该卡为 Mifare Classic 1k（S50 类型），UID 可读，ATQA 为 `00 04`，SAK 为 `28`，支持 ISO/IEC 14443-4 协议但不支持 ISO/IEC 18092（NFC Forum Type 4 标签）。结合 SAK 值为 `28` 可判断该卡实为 CPU 卡模拟 M1 协议，常见于国内门禁或一卡通系统。根据芯片特征及市场常见方案，推测该卡为复旦微电子 FM1208 系列 CPU 卡。

该卡在 M1 模拟层中保留了若干关键扇区：扇区 0 存储厂商信息与 UID，扇区 9 和 10 存储了实际用于门禁鉴权的数据。除扇区 9 和 10 外，其余扇区的 KeyA 和 KeyB 均为默认密钥 `ffffffffffff`，可自由读写。而扇区 9 和 10 的 KeyA 同样为 `ffffffffffff`，具备完整读写权限；KeyB 则基于特定算法生成，控制区块及访问权限，但目前尚未明确该设计的具体用途。

在实际门禁场景中，使用 CUID 卡复制该卡的 M1 部分（包括 UID 及扇区 9、10 的数据）后，可成功模拟原卡并通过宿舍门禁系统。进一步调试发现，门禁设备仅通过 KeyA (`ffffffffffff`) 读取扇区 9 和 10 的加密数据进行鉴权。因此，将这两个扇区的 KeyB 也改写为 `ffffffffffff`，即可将卡片还原为“未加密”状态（仅对使用 KeyA 验证的设备有效），便于后续读写或模拟操作。

尽管该卡具备 CPU 功能，可能内置更复杂的加密与逻辑控制，但逆向分析客户端读卡/写卡程序以研究其 CPU 层行为难度较大，且对实际门禁模拟并无显著收益，因此目前仅聚焦于其 M1 模拟层的处理与复制。

[^1]:
    合肥工业大学信息化建设与管理办公室.校园卡[DB/OL]. \[2025-07-22].  
    <https://it.hfut.edu.cn/fwzn/xyk.htm>

[^2]:
    合肥工业大学宣城校区管委会.关于校园卡互通切换的通知[DB/OL]. (2020-08-18)\[2025-07-22].  
    <https://xc.hfut.edu.cn/75/15/c105a29973/page.htm>

[^3]:
    合肥工业大学宣城校区信息化建设和发展中心.一卡通服务[DB/OL]. \[2025-07-22].  
    <https://xcxxzx.hfut.edu.cn/87/list.htm>

[^4]:
    合肥工业大学信息化建设与管理办公室.常见问题[DB/OL]. \[2025-08-10].  
    <https://it.hfut.edu.cn/cjwt.htm>
